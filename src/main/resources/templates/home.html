<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title> Smart Home </title>

    <link rel="stylesheet" th:href="@{/css/main.css}"/>
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}"/>
    <script type="text/javascript" th:src="@{/js/jquery-3.4.1.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/bootstrap.js}"></script>
    <link rel="stylesheet" th:href="@{/css/Custom.css}"/>


</head>

<body class="bg-image">
<div class="main-grid-container">



    <div class="grid-container-1">
        <div class="grid-item"><h1 id="sensor1">People</h1></div>
        <div class="grid-item"><h1 id="headCountInHome"></h1></div>
        <div class="grid-item"><h1 id="sensor2">Window 1</h1></div>
        <div class="grid-item"><h1 id="laser1"></h1></div>
        <div class="grid-item"><h1 id="sensor3">Window 2</h1></div>
        <div class="grid-item"><h1 id="laser2"></h1></div>
        <div class="grid-item"><h1 id="sensor4">Window 3</h1></div>
        <div class="grid-item"><h1 id="laser3"></h1></div>
        <div class="grid-item"><h1 id="sensor5">Door Look</h1></div>
        <div class="grid-item"><h1 id="vibrationCount"></h1></div>
    </div>

    <div class="grid-container">
        <div class="grid-item-1">11</div>
        <div class="grid-item-1">12</div>
    </div>

</div>


<h1>Smart home</h1>

<script type="application/javascript">
    function getContiniouslyHeadCountData() {
        $.ajax({
            url: '/SmartHomeSystem/get-data',
            type: "GET",
            dataType: "xml",
            contentType: "application/xml",
            success: function (xmlData) {
                $(xmlData).find("ResponseData").each(function () {
                    var headCount = $(this).find('headCount').text();
                    $('#headCount').html(headCount);
                });
            }
        });
    }
    setInterval(getContiniouslyHeadCountData, 5000);

</script>

<script type="application/javascript">
    function getContiniouslyAllData() {
        $.ajax({
            url: '/SmartHomeSystem/get-vibration-data',
            type: "GET",
            dataType: "xml",
            contentType: "application/xml",
            success: function (xmlData) {
                $(xmlData).find("ResponseData").each(function () {
                    var vibrationCount = $(this).find('vibrationCount').text();
                    $('#vibrationCount').html(vibrationCount);

                });
            }
        });
    }
    setInterval(getContiniouslyAllData, 5000);

</script>

<script type="application/javascript">
    function getContiniouslyLaser1Data() {
        $.ajax({
            url: '/SmartHomeSystem/get-laser1-data',
            type: "GET",
            dataType: "xml",
            contentType: "application/xml",
            success: function (xmlData) {
                $(xmlData).find("ResponseData").each(function () {
                    var laser1 = $(this).find('laserSensor1data').text();
                    $('#laser1').html(laser1);
                    //TakeDecision(headCountInHome,headCountInHome);
                });
            }
        });
    }

    setInterval(getContiniouslyLaser1Data, 5000);

</script>

<script type="application/javascript">
    function getContiniouslyHeadCountData() {
        $.ajax({
            url: '/SmartHomeSystem/get-laser2-data',
            type: "GET",
            dataType: "xml",
            contentType: "application/xml",
            success: function (xmlData) {
                result=xmlData;
                $(xmlData).find("ResponseData").each(function () {

                    var laser2 = $(this).find('laserSensor2data').text();
                    var headCountInHome = $(this).find('headCountInHome').text();
                    var vibrationCount = $(this).find('vibrationCount').text();
                    var headCount = $(this).find('headCount').text();
                    console.log(xmlData);
                    $('#laser2').html(laser2);
                    $('#headCountInHome').html(headCountInHome);
                    TakeDecision(laser2,headCountInHome, vibrationCount, headCount);
                });
            }
        });
    }



    setInterval(getContiniouslyHeadCountData, 5000);

</script>

<script type="application/javascript">
    function getContiniouslyHeadCountData() {
        $.ajax({
            url: '/SmartHomeSystem/get-laser3-data',
            type: "GET",
            dataType: "xml",
            contentType: "application/xml",
            success: function (xmlData) {
                result=xmlData;
                $(xmlData).find("ResponseData").each(function () {

                    var laser3 = $(this).find('laserSensor3data').text();
                    console.log(xmlData);
                    $('#laser3').html(laser3);
                });
            }
        });
    }



    setInterval(getContiniouslyHeadCountData, 5000);

</script>

<script>
        function TakeDecision(data1,data2, data3,data4){
       if(data1==true)
       {
           $('#decision').html(data1.concat(data2, data3, data4));
       }
       else
       {
           $('#decision').html(data1.concat(data2, data3, data4));
       }
    }
</script>
</body>
</html>